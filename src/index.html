<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>React To-Do App - Starter Pack</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@500&family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet">

    <!-- CSS Imports -->
    <link rel="stylesheet" href="./index.css">
    <link rel="stylesheet" href="./App.css">
    <link rel="stylesheet" href="./components/AddTodoForm/AddTodoForm.css">
    <link rel="stylesheet" href="./components/TodoList/TodoList.css">
    <link rel="stylesheet" href="./components/TodoItem/TodoItem.css">

    <!-- React Libraries -->
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>

    <div id="root"></div>

    <script type="text/babel">
        // --- საწყისი მონაცემები (სტუდენტებმა უნდა შეცვალონ API-დან წამოღებული მონაცემებით) ---
        const initialTodos = [
            { id: 1, title: 'React-ის კურსის მე-5 მოდულის გავლა', completed: false, createdAt: '2025-08-05T19:30:00Z' },
            { id: 2, title: 'პრაქტიკული დავალების შესრულება', completed: false, createdAt: '2025-08-05T15:00:00Z' },
            { id: 3, title: 'Starter Pack-ის გამოყენება', completed: true, createdAt: '2025-08-04T12:00:00Z' },
        ];

        // --- დამხმარე ფუნქცია თარიღის ფორმატირებისთვის ---
        function formatDate(isoString) {
            if (!isoString) return '';
            const date = new Date(isoString);
            return date.toLocaleDateString('ka-GE', {
                month: 'long',
                day: 'numeric',
            });
        }

        // --- TodoItem კომპონენტი ---
        function TodoItem({ todo }) {
            const itemClasses = `todo-item ${todo.completed ? 'completed' : ''}`;
            
            const handleDelete = () => console.log(`Deleting todo with id: ${todo.id}`);
            const handleToggle = () => console.log(`Toggling todo with id: ${todo.id}`);

            return (
                <li className={itemClasses}>
                    <div className="todo-item-content">
                        <input type="checkbox" checked={todo.completed} onChange={handleToggle} />
                        <span className="todo-text">{todo.title}</span>
                    </div>
                    <div className="todo-item-meta">
                        <span className="todo-date">{formatDate(todo.createdAt)}</span>
                        <button className="delete-btn" onClick={handleDelete}>
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                <line x1="10" y1="11" x2="10" y2="17"></line>
                                <line x1="14" y1="11" x2="14" y2="17"></line>
                            </svg>
                        </button>
                    </div>
                </li>
            );
        }

        // --- TodoList კომპონენტი ---
        function TodoList({ todos }) {
            return (
                <ul className="todo-list">
                    {todos.map(todo => (
                        <TodoItem key={todo.id} todo={todo} />
                    ))}
                </ul>
            );
        }

        // --- AddTodoForm კომპონენტი ---
        function AddTodoForm() {
            const handleSubmit = (e) => {
                e.preventDefault();
                const newTodoText = e.target.elements.todoText.value;
                if(newTodoText.trim()){
                    console.log(`Adding new todo: ${newTodoText}`);
                    e.target.elements.todoText.value = '';
                }
            };
            
            return (
                <form className="add-todo-form" onSubmit={handleSubmit}>
                    <input 
                        type="text" 
                        name="todoText"
                        placeholder="დაამატე ახალი დავალება..."
                    />
                    <button type="submit">დამატება</button>
                </form>
            );
        }

        // --- მთავარი App კომპონენტი ---
        function App() {
            const [todos, setTodos] = React.useState(initialTodos);

            return (
                <div className="todo-app">
                    <header className="app-header">
                        <h1>ჩემი დავალებები</h1>
                    </header>
                    <main>
                        <AddTodoForm />
                        <TodoList todos={todos} />
                    </main>
                </div>
            );
        }

        // --- აპლიკაციის რენდერინგი ---
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
